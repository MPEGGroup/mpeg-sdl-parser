import type { BuildContext } from "../util/build-context.ts";

// Generated by Lezer from the SDL grammar
import { Whitespace } from "../../../lezer/parser.terms.ts";

export function consumeWhiteSpaceAndMissingErrors(
  buildContext: BuildContext,
): void {
  const { cursor } = buildContext;
  const currentState =
    buildContext.stateStack[buildContext.stateStack.length - 1];

  if (currentState.isEndOfSiblings) {
    return;
  }

  let noSibling = true;

  do {
    if ((cursor.type.id !== Whitespace) && !cursor.type.isError) {
      noSibling = false;
      break;
    }
  } while (cursor.nextSibling());

  currentState.isEndOfSiblings = noSibling;
}
